<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">



    <title>{{ client.brand }} Chatbot</title>
<style>
  #chat-box {
    max-height: 400px;
    overflow-y: auto;
    padding: 1rem;
    background: #ffffff;
    border-radius: 1rem;
    margin-bottom: 1rem;
  }

  .user-message, .bot-message {
    max-width: 75%;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    padding: 0.75rem 1rem;
    margin: 0.5rem 0;
    border-radius: 20px;
    font-size: 1rem;
    line-height: 1.4;
    word-wrap: break-word;
  }

  .user-message {
    background-color: #d1e7dd; /* stronger green */
  color: #000; /* black text for contrast */
  align-self: flex-end;
  margin-left: auto;
  text-align: right;
  border-radius: 20px;
  padding: 0.75rem 1rem;
  margin: 0.5rem 0;
  max-width: 75%;
}

.bot-message {
  background-color: #f1f1f1; /* stronger gray */
  color: #000; /* black text for contrast */
  align-self: flex-start;
  margin-right: auto;
  text-align: left;
  border-radius: 20px;
  padding: 0.75rem 1rem;
  margin: 0.5rem 0;
  max-width: 75%;
}


  #chat-box {
    display: flex;
    flex-direction: column;
  }

  .chat-input-area {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    justify-content: center;
  }

  #chat-input {
    flex: 1;
    padding: 0.8rem;
    border-radius: 9999px;
    border: none;
    outline: none;
    font-size: 1rem;
    background-color: #f2f2f2;
  }

  #send-btn {
    padding: 0.6rem 1rem;
    border: none;
    background-color: #4CAF50;
    color: white;
    font-weight: bold;
    border-radius: 9999px;
    cursor: pointer;
  }

  #send-btn:hover {
    background-color: #45a049;
  }
  
  .powered-by {
  text-align: center;
  font-size: 0.75rem;
  color: rgba(0, 0, 0, 0.4); /* subtle gray */
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
}

.powered-by a {
  color: rgba(0, 0, 0, 0.4);
  text-decoration: none;
  font-weight: bold;
}

.powered-by a:hover {
  color: rgba(0, 0, 0, 0.6);
}

</style>

</head>
<body style="margin: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: {{ client.color }}; color: white; display: flex; flex-direction: column; align-items: center; padding: 2rem; min-height: 100vh; box-sizing: border-box;">

  <!-- Circular Logo -->
  <img src="{{ client.logo }}" alt="Logo">
     style="width: 64px; height: 64px; border-radius: 50%; object-fit: cover; box-shadow: 0 0 8px rgba(0, 0, 0, 0.2); margin-bottom: 1rem;">

  <!-- Brand Name -->
  <h1 style="margin: 0 0 0.5rem 0;">{{ client.brand }}</h1>

  <!-- Greeting -->
  <p style="margin: 0 0 2rem 0; font-size: 1.2rem; font-weight: 300;">{{ client.greeting }}</p>

  
<div id="chat-box" class="chat-box"></div>

<div class="chat-input-area">
    <input type="text" id="chat-input" placeholder="Ask something..." />
    <button id="send-btn">Send</button>
</div>

<div class="powered-by">
  Powered by <a href="https://broqbot.com" target="_blank">Bro-Q Bot</a>
</div>



</body>


<script>
  const BRAND_ID = "{{ brand_id }}";  // passed from Flask route
</script>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const input = document.getElementById('chat-input');
    const sendBtn = document.getElementById('send-btn');
    const chatBox = document.getElementById('chat-box');

    function appendMessage(sender, message) {
        const msg = document.createElement('div');
        msg.classList.add(sender === 'user' ? 'user-message' : 'bot-message');
        msg.textContent = message;
        chatBox.appendChild(msg);
        chatBox.scrollTop = chatBox.scrollHeight;
    }

    sendBtn.addEventListener('click', () => {
        const userInput = input.value.trim();
        if (!userInput) return;

        appendMessage('user', userInput);
        input.value = '';

        fetch('/chatbot/ask', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                message: userInput,
                client_id: "{{ client.id }}"  // Flask injects this
            })
        })
        .then(response => response.json())
        .then(data => {
            appendMessage('bot', data.response);
        })
        .catch(error => {
            console.error('Error:', error);
            appendMessage('bot', 'Something went wrong.');
        });
    });
});
</script>




</html>

